---
import AstroPageShell from "~/astro/AstroPageShell.astro";
import { getLayoutBackdropImageProps } from "~/components/layout/getLayoutBackdropImageProps";
import { Layout } from "~/components/layout/Layout";
import { getViewingsProps } from "~/features/viewings/getViewingsProps";
import { Viewings } from "~/features/viewings/Viewings";

const viewingsProps = await getViewingsProps();
const backdropImageProps = await getLayoutBackdropImageProps("viewings");

const deck = '"We have such sights to show you!"';
const metaDescription =
  "A list of every movie I've seen since 2012. Filter by title, release year, viewing year, venue, medium, or genre. Sort by oldest or newest.";
---

<AstroPageShell
  canonical={true}
  meta={{ description: metaDescription }}
  openGraph={{ description: deck, type: "website" }}
  title="Viewing Log"
>
  <Layout
    className="bg-subtle"
    backdrop={{
      deck,
      imageProps: backdropImageProps,
      title: "Viewing Log",
    }}
  >
    <Viewings client:load {...viewingsProps} />
  </Layout>
</AstroPageShell>
